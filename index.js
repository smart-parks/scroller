!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Scroller=n()}(this,(function(){"use strict";const t="undefined"==typeof window?{}:window,n=1e3;let i={},e=1;const o=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame;function l(t){var n=null!=i[t];return n&&(i[t]=null),n}function r(t,l,r,a,h){var s=Date.now(),u=s,c=0,f=0,_=e++;if(_%20==0){var v={};for(var M in i)v[M]=!0;i=v}var d=function(e){var v=!0!==e,M=Date.now();if(!i[_]||l&&!l(_))return i[_]=null,void(r&&r(60-f/((M-s)/n),_,!1));if(v)for(var p=Math.round((M-u)/16.666666666666668)-1,m=0;m<Math.min(p,4);m++)d(!0),f++;a&&(c=(M-s)/a)>1&&(c=1);var g=h?h(c):c;!1!==t(g,M,v)&&1!==c||!v?v&&(u=M,o(d)):(i[_]=null,r&&r(60-f/((M-s)/n),_,1===c||null==a))};return i[_]=!0,o(d),_}function a(t){return Math.pow(t-1,3)+1}function h(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}const s={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:function(){},penetrationDeceleration:.03,penetrationAcceleration:.08};function u(t,n){this.t=t,this.options=Object.assign({},s,n)}return u.prototype={i:!1,o:!1,l:!1,h:!1,u:!1,_:!1,v:!1,M:0,p:0,m:0,g:0,T:0,D:0,S:100,L:100,Z:null,I:!1,P:null,A:null,H:null,V:1,C:0,R:0,W:0,j:0,k:0,B:0,X:0,Y:null,G:null,O:null,q:null,F:null,J:null,K:null,N:null,U:null,$:null,setDimensions:function(t,n,i,e){var o=this;t===+t&&(o.m=t),n===+n&&(o.g=n),i===+i&&(o.T=i),e===+e&&(o.D=e),o.tt(),o.scrollTo(o.C,o.R,!0)},setPosition:function(t,n){this.M=t||0,this.p=n||0},setSnapSize:function(t,n){this.S=t,this.L=n},activatePullToRefresh:function(t,n,i,e){var o=this;o.Z=t,o.P=n,o.A=i,o.H=e},triggerPullToRefresh:function(){this.nt(this.C,-this.Z,this.V,!0),this.H&&this.H()},finishPullToRefresh:function(){var t=this;t.I=!1,t.A&&t.A(),t.scrollTo(t.C,t.R,!0)},getValues:function(){var t=this;return{left:t.C,top:t.R,zoom:t.V}},getScrollMax:function(){return{left:this.W,top:this.j}},zoomTo:function(t,n,i,e,o){var r=this;if(!r.options.zooming)throw new Error("Zooming is not enabled!");o&&(r.it=o),r._&&(l(r._),r._=!1);var a=r.V;null==i&&(i=r.m/2),null==e&&(e=r.g/2),t=Math.max(Math.min(t,r.options.maxZoom),r.options.minZoom),r.tt(t);var h=(i+r.C)*t/a-i,s=(e+r.R)*t/a-e;h>r.W?h=r.W:h<0&&(h=0),s>r.j?s=r.j:s<0&&(s=0),r.nt(h,s,t,n)},zoomBy:function(t,n,i,e,o){this.zoomTo(this.V*t,n,i,e,o)},scrollTo:function(t,n,i,e){var o=this;if(o._&&(l(o._),o._=!1),null!=e&&e!==o.V){if(!o.options.zooming)throw new Error("Zooming is not enabled!");t*=e,n*=e,o.tt(e)}else e=o.V;o.options.scrollingX?o.options.paging?t=Math.round(t/o.m)*o.m:o.options.snapping&&(t=Math.round(t/o.S)*o.S):t=o.C,o.options.scrollingY?o.options.paging?n=Math.round(n/o.g)*o.g:o.options.snapping&&(n=Math.round(n/o.L)*o.L):n=o.R,t=Math.max(Math.min(o.W,t),0),n=Math.max(Math.min(o.j,n),0),t===o.C&&n===o.R&&(i=!1),o.o||o.nt(t,n,e,i)},scrollToViewportCenter(t,n,i,e){e=null==e?this.V:e,this.zoomTo(e,!1),this.scrollTo(t*e-.5*this.m,n*e-.5*this.g,i)},scrollBy:function(t,n,i){var e=this,o=e.v?e.k:e.C,l=e.v?e.B:e.R;e.scrollTo(o+(t||0),l+(n||0),i)},containsPoint:(t,n)=>!(t<0)&&(!(t>self.T)&&(!(n<0)&&!(n>self.D))),doMouseZoom:function(t,n,i,e){var o=this,l=t>0?.97:1.03;return o.zoomTo(o.V*l,!1,i-o.M,e-o.p)},doTouchStart:function(t,n){if(null==t.length)throw new Error("Invalid touch list: "+t);if(n instanceof Date&&(n=n.valueOf()),"number"!=typeof n)throw new Error("Invalid timestamp value: "+n);var i,e,o=this;o.et=!0,o._&&(l(o._),o._=!1,o.et=!0),o.v&&(l(o.v),o.v=!1,o.et=!0);var r=1===t.length;r?(i=t[0].pageX,e=t[0].pageY):(i=Math.abs(t[0].pageX+t[1].pageX)/2,e=Math.abs(t[0].pageY+t[1].pageY)/2),o.ot=i,o.lt=e,o.rt=o.V,o.Y=i,o.G=e,o.O=n,o.at=1,o.ht=!r&&o.options.scrollingX,o.st=!r&&o.options.scrollingY,o.o=!0,o.l=!1,o.u=!r,o.i=r,o.q=[]},doTouchMove:function(t,n,i){if(null==t.length)throw new Error("Invalid touch list: "+t);if(n instanceof Date&&(n=n.valueOf()),"number"!=typeof n)throw new Error("Invalid timestamp value: "+n);var e=this;if(e.o){var o,l;2===t.length?(o=Math.abs(t[0].pageX+t[1].pageX)/2,l=Math.abs(t[0].pageY+t[1].pageY)/2):(o=t[0].pageX,l=t[0].pageY);var r=e.q;if(e.u){var a=o-e.Y,h=l-e.G,s=e.C,u=e.R,c=e.V;if(null!=i&&e.options.zooming){var f=c;if(c=c/e.at*i,f!==(c=Math.max(Math.min(c,e.options.maxZoom),e.options.minZoom))){var _=o-e.M,v=l-e.p;s=(_+s)*c/f-_,u=(v+u)*c/f-v,e.tt(c)}}if(e.ht){s-=a*this.options.speedMultiplier;var M=e.W;(s>M||s<0)&&(e.options.bouncing?s+=a/2*this.options.speedMultiplier:s=s>M?M:0)}if(e.st){u-=h*this.options.speedMultiplier;var d=e.j;(u>d||u<0)&&(e.options.bouncing?(u+=h/2*this.options.speedMultiplier,e.ht||null==e.Z||(!e.I&&u<=-e.Z?(e.I=!0,e.P&&e.P()):e.I&&u>-e.Z&&(e.I=!1,e.A&&e.A()))):u=u>d?d:0)}r.length>60&&r.splice(0,30),r.push(s,u,n),e.nt(s,u,c)}else{var p=e.options.locking?3:0,m=Math.abs(o-e.ot),g=Math.abs(l-e.lt);e.ht=e.options.scrollingX&&m>=p,e.st=e.options.scrollingY&&g>=p,r.push(e.C,e.R,n),e.u=(e.ht||e.st)&&(m>=5||g>=5),e.u&&(e.et=!1)}e.Y=o,e.G=l,e.O=n,e.at=i}},doTouchEnd:function(t){if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);var n=this;if(n.o){if(n.o=!1,n.u)if(n.u=!1,n.i&&n.options.animating&&t-n.O<=100){for(var i=n.q,e=i.length-1,o=e,l=e;l>0&&i[l]>n.O-100;l-=3)o=l;if(o!==e){var r=i[e]-i[o],a=n.C-i[o-2],h=n.R-i[o-1];n.U=a/r*(1e3/60),n.$=h/r*(1e3/60);var s=n.options.paging||n.options.snapping?4:1;Math.abs(n.U)>s||Math.abs(n.$)>s?n.I||n.ut(t):n.options.scrollingComplete()}else n.options.scrollingComplete()}else t-n.O>100&&n.options.scrollingComplete();n._||(n.I&&n.H?(n.nt(n.C,-n.Z,n.V,!0),n.H&&n.H()):((n.et||n.u)&&n.options.scrollingComplete(),n.scrollTo(n.C,n.R,!0,n.V),n.I&&(n.I=!1,n.A&&n.A()))),n.q.length=0}},nt:function(t,n,i,e){var o=this,s=o.v;if(s&&(l(s),o.v=!1),e&&o.options.animating){o.k=t,o.B=n,o.X=i;var u=o.C,c=o.R,f=o.V,_=t-u,v=n-c,M=i-f;o.v=r((function(t,n,i){i&&(o.C=u+_*t,o.R=c+v*t,o.V=f+M*t,o.t&&o.t(o.C,o.R,o.V))}),(function(t){return o.v===t}),(function(t,n,i){n===o.v&&(o.v=!1),(o.l||i)&&o.options.scrollingComplete(),o.options.zooming&&(o.tt(),o.it&&(o.it(),o.it=null))}),o.options.animationDuration,s?a:h)}else o.k=o.C=t,o.B=o.R=n,o.X=o.V=i,o.t&&o.t(t,n,i),o.options.zooming&&(o.tt(),o.it&&(o.it(),o.it=null))},tt:function(t){var n=this;null==t&&(t=n.V),n.W=Math.max(n.T*t-n.m,0),n.j=Math.max(n.D*t-n.g,0)},ut:function(t){var n=this;if(n.options.paging){var i=Math.max(Math.min(n.C,n.W),0),e=Math.max(Math.min(n.R,n.j),0),o=n.m,l=n.g;n.F=Math.floor(i/o)*o,n.J=Math.floor(e/l)*l,n.K=Math.ceil(i/o)*o,n.N=Math.ceil(e/l)*l}else n.F=0,n.J=0,n.K=n.W,n.N=n.j;var a=n.options.snapping?4:.001;n._=r((function(t,i,e){n.ct(e)}),(function(){var t=Math.abs(n.U)>=a||Math.abs(n.$)>=a;return t||(n.l=!0),t}),(function(t,i,e){n._=!1,n.l&&n.options.scrollingComplete(),n.scrollTo(n.C,n.R,n.options.snapping)}))},ct:function(t){var n=this,i=n.C+n.U,e=n.R+n.$;if(!n.options.bouncing){var o=Math.max(Math.min(n.K,i),n.F);o!==i&&(i=o,n.U=0);var l=Math.max(Math.min(n.N,e),n.J);l!==e&&(e=l,n.$=0)}if(t?n.nt(i,e,n.V):(n.C=i,n.R=e),!n.options.paging){n.U*=.95,n.$*=.95}if(n.options.bouncing){var r=0,a=0,h=n.options.penetrationDeceleration,s=n.options.penetrationAcceleration;i<n.F?r=n.F-i:i>n.K&&(r=n.K-i),e<n.J?a=n.J-e:e>n.N&&(a=n.N-e),0!==r&&(r*n.U<=0?n.U+=r*h:n.U=r*s),0!==a&&(a*n.$<=0?n.$+=a*h:n.$=a*s)}}},u}));
//# sourceMappingURL=index.js.map
